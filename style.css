@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #060610;
  font-family: 'Press Start 2P', monospace;
}

/* ===== FALLING WORDS ===== */
#falling-words-container {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  overflow: hidden;
}

.falling-word {
  position: absolute;
  white-space: nowrap;
  pointer-events: none;
  user-select: none;
  will-change: transform;
  text-shadow: 0 0 6px currentColor, 0 0 12px currentColor;
}

.w0 { color: #39ff14; }
.w1 { color: #ff10f0; }
.w2 { color: #00ffff; }
.w3 { color: #ffff00; }
.w4 { color: #ff6600; }
.w5 { color: #bf00ff; }
.w6 { color: #ff3355; }
.w7 { color: #00ff88; }

/* ===== WORD GLITCH ===== */
.falling-word.glitching {
  animation: wordGlitch 500ms steps(2) forwards;
}

@keyframes wordGlitch {
  0%   { opacity:1; transform:translate(0,0); text-shadow:0 0 6px currentColor,0 0 12px currentColor; }
  8%   { transform:translate(-8px,2px) skewX(15deg); text-shadow:4px 0 #ff0000,-4px 0 #00ffff; clip-path:inset(20% 0 30% 0); }
  16%  { transform:translate(10px,-3px) skewX(-20deg) scaleX(1.1); text-shadow:-5px 0 #ff0000,5px 0 #00ffff; clip-path:inset(50% 0 10% 0); }
  24%  { transform:translate(-6px,4px) skewX(25deg) scaleY(0.9); text-shadow:6px 0 #ff00ff,-6px 0 #00ff00; clip-path:inset(10% 0 60% 0); opacity:0.7; }
  32%  { transform:translate(12px,-2px) skewX(-30deg) scaleX(0.85); text-shadow:-4px 2px #ff0000,4px -2px #0000ff; clip-path:inset(40% 0 20% 0); }
  40%  { transform:translate(-14px,1px) skewX(10deg); text-shadow:7px 0 #00ffff,-7px 0 #ff10f0; clip-path:inset(0 0 50% 0); opacity:0.4; }
  50%  { transform:translate(5px,-5px) scaleX(1.3) scaleY(0.7); text-shadow:-8px 0 #ff0000,8px 0 #00ffff,0 4px #ff00ff; clip-path:inset(30% 0 30% 0); opacity:0.2; }
  58%  { transform:translate(-3px,3px) scaleX(0.8); text-shadow:5px 0 #00ff00,-5px 0 #ff0000; clip-path:inset(60% 0 5% 0); opacity:0.5; }
  66%  { transform:translate(8px,-1px) skewX(-15deg); text-shadow:-3px 0 #00ffff,3px 0 #ff10f0; clip-path:inset(15% 0 40% 0); opacity:0.7; }
  82%  { transform:translate(3px,-1px) skewX(-5deg); clip-path:none; opacity:0.9; }
  100% { transform:translate(0,0); text-shadow:0 0 6px currentColor,0 0 12px currentColor; clip-path:none; opacity:1; }
}

/* ===== 8-BIT CHARACTER ===== */
#pixel-dude {
  position: fixed;
  z-index: 5;
  pointer-events: auto;
  transition: none;
  filter: drop-shadow(0 0 4px #00ffff) drop-shadow(0 0 8px #00ffff);
}

#pixel-dude canvas {
  display: block;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* Глитч при падении — мигает и дёргается, НО остаётся видимым */
#pixel-dude.falling-glitch {
  animation: dudeFallingGlitch 300ms steps(2) infinite;
}

@keyframes dudeFallingGlitch {
  0%   { filter: drop-shadow(0 0 4px #ff0000) drop-shadow(0 0 8px #ff0000) hue-rotate(0deg); transform: translate(0,0) skewX(0deg); }
  25%  { filter: drop-shadow(0 0 6px #00ffff) drop-shadow(0 0 12px #ff00ff) hue-rotate(90deg) brightness(1.5); transform: translate(3px,-1px) skewX(8deg); }
  50%  { filter: drop-shadow(0 0 4px #ff00ff) drop-shadow(0 0 10px #ffff00) hue-rotate(180deg) saturate(2); transform: translate(-4px,1px) skewX(-10deg); }
  75%  { filter: drop-shadow(0 0 8px #00ff00) drop-shadow(0 0 6px #ff0000) hue-rotate(270deg) brightness(2); transform: translate(2px,2px) skewX(5deg); }
  100% { filter: drop-shadow(0 0 4px #ff0000) drop-shadow(0 0 8px #ff0000) hue-rotate(360deg); transform: translate(0,0) skewX(0deg); }
}

#pixel-dude.respawning {
  animation: dudeRespawn 500ms ease-out forwards;
}

@keyframes dudeRespawn {
  0%   { opacity:0; filter: drop-shadow(0 0 20px #00ffff) brightness(3); transform:scale(0.2); }
  30%  { opacity:0.6; filter: drop-shadow(0 0 15px #ff10f0) brightness(2); transform:scale(1.3); }
  60%  { opacity:0.9; filter: drop-shadow(0 0 8px #00ffff) brightness(1.3); transform:scale(0.9); }
  100% { opacity:1; filter: drop-shadow(0 0 4px #00ffff) drop-shadow(0 0 8px #00ffff); transform:scale(1); }
}

/* ===== BUTTON ===== */
#language-button-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
}

.pixel-button {
  font-family: 'Press Start 2P', monospace;
  font-size: 20px;
  padding: 22px 44px;
  background: #ff10f0;
  color: #fff;
  border: none;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 3px;
  transition: background 0.15s;
  box-shadow:
    inset 4px 4px 0 #ff88ff,
    inset -4px -4px 0 #7700aa,
    0 6px 0 #7700aa,
    0 8px 0 rgba(0,0,0,0.6),
    0 0 30px rgba(255,16,240,0.5),
    0 0 60px rgba(255,16,240,0.2);
}

.pixel-button:hover {
  background: #ff44ff;
  box-shadow:
    inset 4px 4px 0 #ffaaff,
    inset -4px -4px 0 #7700aa,
    0 6px 0 #7700aa,
    0 8px 0 rgba(0,0,0,0.6),
    0 0 50px rgba(255,16,240,0.7),
    0 0 100px rgba(255,16,240,0.3);
}

.pixel-button.pressed {
  animation: btnGlitch 650ms cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

.pixel-button.pressed .button-text {
  animation: btnTextGlitch 650ms steps(3);
}

@keyframes btnGlitch {
  0%   { transform: scale(1); }
  10%  { transform: scale(0.82) translateY(6px); }
  20%  { transform: scale(0.85) translateX(-6px) skewX(5deg); }
  30%  { transform: scale(0.85) translateX(6px) skewX(-5deg); }
  40%  { transform: scale(0.88) translateX(-3px) skewX(3deg); }
  55%  { transform: scale(1.1) translateY(-4px); }
  70%  { transform: scale(0.97); }
  85%  { transform: scale(1.02); }
  100% { transform: scale(1); }
}

@keyframes btnTextGlitch {
  0%, 100% { text-shadow: none; }
  10%, 30%, 50% { text-shadow: 4px 0 #00ffff, -4px 0 #ff0000, 0 0 15px #ff10f0; }
  20%, 40% { text-shadow: -5px 0 #00ffff, 5px 0 #ff0000, 0 3px #00ff00; }
}

@media (max-width: 600px) {
  .pixel-button { font-size: 14px; padding: 14px 28px; }
}
